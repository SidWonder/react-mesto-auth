{"ast":null,"code":"class Api {\n  constructor({\n    baseUrl,\n    headers\n  }) {\n    this.baseUrl = baseUrl;\n    this.headers = headers;\n  }\n\n  getInitialData() {\n    return Promise.all([this.getUserInfo(), this.getCards()]);\n  }\n\n  _handleOriginalResponse(res) {\n    if (!res.ok) {\n      return Promise.reject(`Error: ${res.status}`);\n    }\n\n    return res.json();\n  }\n\n  getUserInfo() {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: 'GET',\n      headers: this.headers\n    }).then(this._handleOriginalResponse);\n  }\n\n  setUserInfo(data) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        name: data['name'],\n        about: data['about']\n      })\n    }).then(this._handleOriginalResponse);\n  }\n\n  setUserAvatar(data) {\n    return fetch(`${this.baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        avatar: data['avatar']\n      })\n    }).then(this._handleOriginalResponse);\n  }\n\n  getCards() {\n    return fetch(`${this.baseUrl}/cards`, {\n      method: 'GET',\n      headers: this.headers\n    }).then(this._handleOriginalResponse);\n  }\n\n  addNewCard(data) {\n    return fetch(`${this.baseUrl}/cards`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        name: data['name'],\n        link: data['link']\n      })\n    }).then(this._handleOriginalResponse);\n  }\n\n  addLike(data) {\n    return fetch(`${this.baseUrl}/cards/likes/${data['_id']}`, {\n      method: 'PUT',\n      headers: this.headers\n    }).then(this._handleOriginalResponse);\n  }\n\n  deleteLike(data) {\n    return fetch(`${this.baseUrl}/cards/likes/${data['_id']}`, {\n      method: 'DELETE',\n      headers: this.headers\n    }).then(this._handleOriginalResponse);\n  }\n\n  deleteCard(data) {\n    return fetch(`${this.baseUrl}/cards/${data['_id']}`, {\n      method: 'DELETE',\n      headers: this.headers\n    }).then(this._handleOriginalResponse);\n  }\n\n}\n\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-21',\n  headers: {\n    authorization: '106173b1-6f76-485f-b86e-e9e649d98c04',\n    'Content-Type': 'application/json'\n  }\n});\nexport default api;","map":{"version":3,"sources":["C:/Users/SidWonder/Documents/auth/src/utils/api.js"],"names":["Api","constructor","baseUrl","headers","getInitialData","Promise","all","getUserInfo","getCards","_handleOriginalResponse","res","ok","reject","status","json","fetch","method","then","setUserInfo","data","body","JSON","stringify","name","about","setUserAvatar","avatar","addNewCard","link","addLike","deleteLike","deleteCard","api","authorization"],"mappings":"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","sourcesContent":[" class Api {\r\n    constructor({baseUrl, headers}) {\r\n        this.baseUrl = baseUrl;\r\n        this.headers = headers;\r\n    }\r\n\r\n    getInitialData() {\r\n        return Promise.all([this.getUserInfo(), this.getCards()]);\r\n    }\r\n\r\n\r\n    _handleOriginalResponse(res) {\r\n        if (!res.ok) {\r\n            return Promise.reject(`Error: ${res.status}`);\r\n        }\r\n        return res.json();\r\n    }\r\n\r\n    getUserInfo() {\r\n        return fetch(`${this.baseUrl}/users/me`, {\r\n            method: 'GET',\r\n            headers: this.headers\r\n        }).then(this._handleOriginalResponse)\r\n    }\r\n\r\n    setUserInfo(data) {\r\n        return fetch(`${this.baseUrl}/users/me`, {\r\n            method: 'PATCH',\r\n            headers: this.headers,\r\n            body: JSON.stringify({\r\n                name:data['name'],\r\n                about:data['about']\r\n            })\r\n        }).then(this._handleOriginalResponse)\r\n    }\r\n\r\n    setUserAvatar(data){\r\n        return fetch(`${this.baseUrl}/users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: this.headers,\r\n            body: JSON.stringify({\r\n                avatar: data['avatar']\r\n            })\r\n        }).then(this._handleOriginalResponse)\r\n    }\r\n\r\n    getCards() {\r\n        return fetch(`${this.baseUrl}/cards`, {\r\n            method: 'GET',\r\n            headers: this.headers\r\n        }).then(this._handleOriginalResponse)\r\n    }\r\n\r\n    addNewCard(data) {\r\n        return fetch(`${this.baseUrl}/cards`, {\r\n            method: 'POST',\r\n            headers: this.headers,\r\n            body: JSON.stringify({\r\n                name: data['name'],\r\n                link: data['link']\r\n            })\r\n        }).then(this._handleOriginalResponse)\r\n    }\r\n\r\n    addLike(data){\r\n        return fetch (`${this.baseUrl}/cards/likes/${data['_id']}`, {\r\n            method: 'PUT',\r\n            headers: this.headers\r\n        }).then(this._handleOriginalResponse)\r\n    }\r\n\r\n    deleteLike(data){\r\n        return fetch (`${this.baseUrl}/cards/likes/${data['_id']}`, {\r\n            method: 'DELETE',\r\n            headers: this.headers\r\n        }).then(this._handleOriginalResponse)\r\n    }\r\n\r\n    deleteCard(data){\r\n        return fetch(`${this.baseUrl}/cards/${data['_id']}`,{\r\n            method: 'DELETE',\r\n            headers: this.headers\r\n        }).then(this._handleOriginalResponse)\r\n    }\r\n}\r\n\r\n const api = new Api({\r\n     baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-21',\r\n     headers: {\r\n         authorization: '106173b1-6f76-485f-b86e-e9e649d98c04',\r\n         'Content-Type': 'application/json'\r\n     }\r\n });\r\n\r\n export default api;"]},"metadata":{},"sourceType":"module"}