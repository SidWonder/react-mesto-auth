{"ast":null,"code":"import _classCallCheck from\"C:/Users/SidWonder/Documents/auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/SidWonder/Documents/auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var Api=/*#__PURE__*/function(){function Api(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this.baseUrl=baseUrl;this.headers=headers;}_createClass(Api,[{key:\"getInitialData\",value:function getInitialData(){return Promise.all([this.getUserInfo(),this.getCards()]);}},{key:\"_handleOriginalResponse\",value:function _handleOriginalResponse(res){if(!res.ok){return Promise.reject(\"Error: \".concat(res.status));}return res.json();}},{key:\"getUserInfo\",value:function getUserInfo(){return fetch(\"\".concat(this.baseUrl,\"/users/me\"),{method:'GET',headers:this.headers}).then(this._handleOriginalResponse);}},{key:\"setUserInfo\",value:function setUserInfo(data){return fetch(\"\".concat(this.baseUrl,\"/users/me\"),{method:'PATCH',headers:this.headers,body:JSON.stringify({name:data['name'],about:data['about']})}).then(this._handleOriginalResponse);}},{key:\"setUserAvatar\",value:function setUserAvatar(data){return fetch(\"\".concat(this.baseUrl,\"/users/me/avatar\"),{method:'PATCH',headers:this.headers,body:JSON.stringify({avatar:data['avatar']})}).then(this._handleOriginalResponse);}},{key:\"getCards\",value:function getCards(){return fetch(\"\".concat(this.baseUrl,\"/cards\"),{method:'GET',headers:this.headers}).then(this._handleOriginalResponse);}},{key:\"addNewCard\",value:function addNewCard(data){return fetch(\"\".concat(this.baseUrl,\"/cards\"),{method:'POST',headers:this.headers,body:JSON.stringify({name:data['name'],link:data['link']})}).then(this._handleOriginalResponse);}},{key:\"addLike\",value:function addLike(data){return fetch(\"\".concat(this.baseUrl,\"/cards/likes/\").concat(data['_id']),{method:'PUT',headers:this.headers}).then(this._handleOriginalResponse);}},{key:\"deleteLike\",value:function deleteLike(data){return fetch(\"\".concat(this.baseUrl,\"/cards/likes/\").concat(data['_id']),{method:'DELETE',headers:this.headers}).then(this._handleOriginalResponse);}},{key:\"deleteCard\",value:function deleteCard(data){return fetch(\"\".concat(this.baseUrl,\"/cards/\").concat(data['_id']),{method:'DELETE',headers:this.headers}).then(this._handleOriginalResponse);}}]);return Api;}();var api=new Api({baseUrl:'https://mesto.nomoreparties.co/v1/cohort-21',headers:{authorization:'106173b1-6f76-485f-b86e-e9e649d98c04','Content-Type':'application/json'}});export default api;","map":{"version":3,"sources":["C:/Users/SidWonder/Documents/auth/src/utils/api.js"],"names":["Api","baseUrl","headers","Promise","all","getUserInfo","getCards","res","ok","reject","status","json","fetch","method","then","_handleOriginalResponse","data","body","JSON","stringify","name","about","avatar","link","api","authorization"],"mappings":"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","sourcesContent":[" class Api {\r\n    constructor({baseUrl, headers}) {\r\n        this.baseUrl = baseUrl;\r\n        this.headers = headers;\r\n    }\r\n\r\n    getInitialData() {\r\n        return Promise.all([this.getUserInfo(), this.getCards()]);\r\n    }\r\n\r\n\r\n    _handleOriginalResponse(res) {\r\n        if (!res.ok) {\r\n            return Promise.reject(`Error: ${res.status}`);\r\n        }\r\n        return res.json();\r\n    }\r\n\r\n    getUserInfo() {\r\n        return fetch(`${this.baseUrl}/users/me`, {\r\n            method: 'GET',\r\n            headers: this.headers\r\n        }).then(this._handleOriginalResponse)\r\n    }\r\n\r\n    setUserInfo(data) {\r\n        return fetch(`${this.baseUrl}/users/me`, {\r\n            method: 'PATCH',\r\n            headers: this.headers,\r\n            body: JSON.stringify({\r\n                name:data['name'],\r\n                about:data['about']\r\n            })\r\n        }).then(this._handleOriginalResponse)\r\n    }\r\n\r\n    setUserAvatar(data){\r\n        return fetch(`${this.baseUrl}/users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: this.headers,\r\n            body: JSON.stringify({\r\n                avatar: data['avatar']\r\n            })\r\n        }).then(this._handleOriginalResponse)\r\n    }\r\n\r\n    getCards() {\r\n        return fetch(`${this.baseUrl}/cards`, {\r\n            method: 'GET',\r\n            headers: this.headers\r\n        }).then(this._handleOriginalResponse)\r\n    }\r\n\r\n    addNewCard(data) {\r\n        return fetch(`${this.baseUrl}/cards`, {\r\n            method: 'POST',\r\n            headers: this.headers,\r\n            body: JSON.stringify({\r\n                name: data['name'],\r\n                link: data['link']\r\n            })\r\n        }).then(this._handleOriginalResponse)\r\n    }\r\n\r\n    addLike(data){\r\n        return fetch (`${this.baseUrl}/cards/likes/${data['_id']}`, {\r\n            method: 'PUT',\r\n            headers: this.headers\r\n        }).then(this._handleOriginalResponse)\r\n    }\r\n\r\n    deleteLike(data){\r\n        return fetch (`${this.baseUrl}/cards/likes/${data['_id']}`, {\r\n            method: 'DELETE',\r\n            headers: this.headers\r\n        }).then(this._handleOriginalResponse)\r\n    }\r\n\r\n    deleteCard(data){\r\n        return fetch(`${this.baseUrl}/cards/${data['_id']}`,{\r\n            method: 'DELETE',\r\n            headers: this.headers\r\n        }).then(this._handleOriginalResponse)\r\n    }\r\n}\r\n\r\n const api = new Api({\r\n     baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-21',\r\n     headers: {\r\n         authorization: '106173b1-6f76-485f-b86e-e9e649d98c04',\r\n         'Content-Type': 'application/json'\r\n     }\r\n });\r\n\r\n export default api;"]},"metadata":{},"sourceType":"module"}